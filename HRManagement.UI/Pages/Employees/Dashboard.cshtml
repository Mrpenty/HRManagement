@page
@model HRManagement.UI.Pages.Employees.DashboardModel
@{
    ViewData["Title"] = "Employee Dashboard";
     Layout = "_EmployeeLayout";
}

<div class="row">
              <div class="col-sm-6 col-md-3">
                <div class="card card-stats card-round">
                  <div class="card-body">
                    <div class="row align-items-center">
                      <div class="col-icon">
                        <div
                          class="icon-big text-center icon-primary bubble-shadow-small"
                        >
                          <i class="fas fa-users"></i>
                        </div>
                      </div>
                      <div class="col col-stats ms-3 ms-sm-0">
                        <div class="numbers">
                          <p class="card-category">Số ngày nghỉ</p>
                          <h4 class="card-title">1,294</h4>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-sm-6 col-md-3">
                <div class="card card-stats card-round">
                  <div class="card-body">
                    <div class="row align-items-center">
                      <div class="col-icon">
                        <div
                          class="icon-big text-center icon-info bubble-shadow-small"
                        >
                          <i class="fas fa-user-check"></i>
                        </div>
                      </div>
                      <div class="col col-stats ms-3 ms-sm-0">
                        <div class="numbers">
                          <p class="card-category">Số ngày làm việc</p>
                          <h4 class="card-title">1303</h4>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
</div>
<div class="card">
                  <div class="card-header">
                    <h4 class="card-title">Multi Filter Select</h4>
                  </div>
                  <div class="card-body">
                    <div class="table-responsive">
                      <div id="multi-filter-select_wrapper" class="dataTables_wrapper container-fluid dt-bootstrap4"><div class="row"><div class="col-sm-12 col-md-6"><div class="dataTables_length" id="multi-filter-select_length"><label>Show <select name="multi-filter-select_length" aria-controls="multi-filter-select" class="form-control form-control-sm"><option value="10">10</option><option value="25">25</option><option value="50">50</option><option value="100">100</option></select> entries</label></div></div><div class="col-sm-12 col-md-6"><div id="multi-filter-select_filter" class="dataTables_filter"><label>Search:<input type="search" class="form-control form-control-sm" placeholder="" aria-controls="multi-filter-select"></label></div></div></div><div class="row"><div class="col-sm-12"><table id="multi-filter-select" class="display table table-striped table-hover dataTable" role="grid" aria-describedby="multi-filter-select_info">
                       
                        <tfoot>
                          <tr><th rowspan="1" colspan="1"><select class="form-select">
                        <tbody id="employee-table-body">
                          <!-- Data will be loaded here by JS -->
                        </tbody>
                    </div>
                  </div>
                </div>

<script>
$(document).ready(function() {
    function renderEmployeeRow(user) {
        return `<tr>
            <td>${user.firstName ?? ''} ${user.lastName ?? ''}</td>
            <td>${user.positionID ?? ''}</td>
            <td>${user.departmentID ?? ''}</td>
            <td>${user.dateOfBirth ? new Date(user.dateOfBirth).getFullYear() : ''}</td>
            <td>${user.hireDate ? new Date(user.hireDate).toLocaleDateString() : ''}</td>
            <td></td>
        </tr>`;
    }
    $.ajax({
        url: '/api/User',
        method: 'GET',
        success: function(data) {
            let html = '';
            data.forEach(function(user) {
                html += renderEmployeeRow(user);
            });
            $('#employee-table-body').html(html);
        },
        error: function() {
            $('#employee-table-body').html('<tr><td colspan="6">Không thể tải dữ liệu nhân viên</td></tr>');
        }
    });
});
</script>